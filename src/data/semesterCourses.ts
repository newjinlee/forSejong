// ===================================
// ì„¸ì¢…ëŒ€í•™êµ 2025ë…„ ê°œì„¤ê³¼ëª© ë°ì´í„°
// 1í•™ê¸°, 2í•™ê¸° í•™ê³¼ë³„/í•™ë…„ë³„ ê³¼ëª©
// ===================================

export type CourseData = {
  id: string;
  name: string;
  type: 'ì „í•„' | 'ì „ì„ ';
  credits: number;
  department?: string; // ì–´ëŠ í•™ê³¼ ê³¼ëª©ì¸ì§€ (íƒ€ê³¼ ì¶”ì²œìš©)
};

export type SemesterCourses = {
  [department: string]: {
    [grade: string]: CourseData[];
  };
};

// ===================================
// ì§„ë¡œë³„ ê´€ë ¨ ê³¼ëª© ë§¤í•‘
// priority: ìš°ì„  ì¶”ì²œ ê³¼ëª© (ì •í™•íˆ ì¼ì¹˜)
// keywords: ê³¼ëª©ëª…ì— í¬í•¨ë˜ë©´ ì¶”ì²œ (ë¶€ë¶„ ì¼ì¹˜)
// ===================================
export const CAREER_COURSE_MAPPING: Record<string, {
  priority: string[];
  keywords: string[];
}> = {
  // ê°œë°œ ì§êµ°
  "ë°±ì—”ë“œ ê°œë°œì": {
    priority: ["ë°ì´í„°ë² ì´ìŠ¤", "ìš´ì˜ì²´ì œ", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "ë¦¬ëˆ…ìŠ¤í”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
    keywords: ["ì„œë²„", "DB", "ë°ì´í„°ë² ì´ìŠ¤", "ë„¤íŠ¸ì›Œí¬", "ì‹œìŠ¤í…œ", "ìš´ì˜ì²´ì œ", "ì•Œê³ ë¦¬ì¦˜", "ìë£Œêµ¬ì¡°", "ë¦¬ëˆ…ìŠ¤"]
  },
  "í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì": {
    priority: ["ì›¹í”„ë¡œê·¸ë˜ë°", "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "Human-AI Interaction", "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°"],
    keywords: ["ì›¹", "UI", "UX", "ì¸í„°í˜ì´ìŠ¤", "ê·¸ë˜í”½", "ë©€í‹°ë¯¸ë””ì–´", "HCI", "Interaction"]
  },
  "í’€ìŠ¤íƒ ê°œë°œì": {
    priority: ["ì›¹í”„ë¡œê·¸ë˜ë°", "ë°ì´í„°ë² ì´ìŠ¤", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ"],
    keywords: ["ì›¹", "ë°ì´í„°ë² ì´ìŠ¤", "ì„œë²„", "ë„¤íŠ¸ì›Œí¬", "ì†Œí”„íŠ¸ì›¨ì–´", "í”„ë¡œê·¸ë˜ë°"]
  },
  "ëª¨ë°”ì¼ ì•± ê°œë°œì": {
    priority: ["ì›¹í”„ë¡œê·¸ë˜ë°", "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "Human-AI Interaction"],
    keywords: ["ëª¨ë°”ì¼", "ì•±", "UI", "í”„ë¡œê·¸ë˜ë°", "ì¸í„°í˜ì´ìŠ¤"]
  },
  "DevOps ì—”ì§€ë‹ˆì–´": {
    priority: ["ìš´ì˜ì²´ì œ", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "ë¦¬ëˆ…ìŠ¤í”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "ì˜¤í”ˆì†ŒìŠ¤SWê°œë¡ "],
    keywords: ["ìš´ì˜ì²´ì œ", "ë„¤íŠ¸ì›Œí¬", "ë¦¬ëˆ…ìŠ¤", "ì‹œìŠ¤í…œ", "ì˜¤í”ˆì†ŒìŠ¤", "ì„œë²„"]
  },
  "í´ë¼ìš°ë“œ ì—”ì§€ë‹ˆì–´": {
    priority: ["ìš´ì˜ì²´ì œ", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ë°ì´í„°ë² ì´ìŠ¤", "ë¦¬ëˆ…ìŠ¤í”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™"],
    keywords: ["í´ë¼ìš°ë“œ", "ë„¤íŠ¸ì›Œí¬", "ì‹œìŠ¤í…œ", "ë¶„ì‚°", "ì„œë²„", "ìš´ì˜ì²´ì œ"]
  },

  // AI/ML ì§êµ°
  "AI ì—”ì§€ë‹ˆì–´": {
    priority: ["ì¸ê³µì§€ëŠ¥", "ê¸°ê³„í•™ìŠµ", "ë”¥ëŸ¬ë‹", "ë”¥ëŸ¬ë‹ê°œë¡ ", "ìì—°ì–´ì²˜ë¦¬", "ì˜ìƒì²˜ë¦¬", "ê°•í™”í•™ìŠµ"],
    keywords: ["AI", "ì¸ê³µì§€ëŠ¥", "ë¨¸ì‹ ëŸ¬ë‹", "ê¸°ê³„í•™ìŠµ", "ë”¥ëŸ¬ë‹", "ì‹ ê²½ë§", "í•™ìŠµ"]
  },
  "ë¨¸ì‹ ëŸ¬ë‹ ì—”ì§€ë‹ˆì–´": {
    priority: ["ê¸°ê³„í•™ìŠµ", "ê¸°ê³„í•™ìŠµê°œë¡ ", "ë”¥ëŸ¬ë‹", "ì¸ê³µì§€ëŠ¥", "í™•ë¥ ë°í†µê³„", "ì„ í˜•ëŒ€ìˆ˜"],
    keywords: ["ê¸°ê³„í•™ìŠµ", "ë¨¸ì‹ ëŸ¬ë‹", "ë”¥ëŸ¬ë‹", "í•™ìŠµ", "í†µê³„", "í™•ë¥ "]
  },
  "ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸": {
    priority: ["ê¸°ê³„í•™ìŠµ", "ë°ì´í„°ë² ì´ìŠ¤", "í™•ë¥ ë°í†µê³„", "ë°ì´í„°ì‹œê°í™”", "ì¸ê³µì§€ëŠ¥", "ë¹…ë°ì´í„°"],
    keywords: ["ë°ì´í„°", "ë¶„ì„", "í†µê³„", "ì‹œê°í™”", "ê¸°ê³„í•™ìŠµ", "ë¹…ë°ì´í„°"]
  },
  "ë°ì´í„° ì—”ì§€ë‹ˆì–´": {
    priority: ["ë°ì´í„°ë² ì´ìŠ¤", "ëŒ€ìš©ëŸ‰ë°ì´í„°ì²˜ë¦¬", "ìš´ì˜ì²´ì œ", "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™"],
    keywords: ["ë°ì´í„°", "ë°ì´í„°ë² ì´ìŠ¤", "ë¹…ë°ì´í„°", "ë¶„ì‚°", "ì²˜ë¦¬", "íŒŒì´í”„ë¼ì¸"]
  },
  "ì»´í“¨í„° ë¹„ì „ ì—”ì§€ë‹ˆì–´": {
    priority: ["ì˜ìƒì²˜ë¦¬", "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "ë”¥ëŸ¬ë‹", "ì¸ê³µì§€ëŠ¥", "íŒ¨í„´ì¸ì‹"],
    keywords: ["ì˜ìƒ", "ì´ë¯¸ì§€", "ë¹„ì „", "ê·¸ë˜í”½", "ì²˜ë¦¬", "ì¸ì‹"]
  },
  "ìì—°ì–´ì²˜ë¦¬ ì—”ì§€ë‹ˆì–´": {
    priority: ["ìì—°ì–´ì²˜ë¦¬", "ì¸ê³µì§€ëŠ¥", "ë”¥ëŸ¬ë‹", "ê¸°ê³„í•™ìŠµ"],
    keywords: ["ìì—°ì–´", "NLP", "í…ìŠ¤íŠ¸", "ì–¸ì–´", "ì²˜ë¦¬"]
  },

  // ë³´ì•ˆ ì§êµ°
  "ë³´ì•ˆ ì—”ì§€ë‹ˆì–´": {
    priority: ["ì •ë³´ë³´í˜¸ê°œë¡ ", "ì •ë³´ë³´í˜¸ì™€ë³´ì•ˆì˜ê¸°ì´ˆ", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ìš´ì˜ì²´ì œ", "ì•”í˜¸í•™"],
    keywords: ["ë³´ì•ˆ", "ì•”í˜¸", "í•´í‚¹", "ì •ë³´ë³´í˜¸", "ë„¤íŠ¸ì›Œí¬"]
  },
  "ì •ë³´ë³´ì•ˆ ì „ë¬¸ê°€": {
    priority: ["ì •ë³´ë³´í˜¸ê°œë¡ ", "ê³µê°œí‚¤ì•”í˜¸ë¡ ", "ëŒ€ì¹­í‚¤ì•”í˜¸ë¡ ", "ì‹œìŠ¤í…œí•´í‚¹ê³¼ë³´ì•ˆ", "ë””ì§€í„¸í¬ë Œì‹"],
    keywords: ["ë³´ì•ˆ", "ì•”í˜¸", "ì •ë³´ë³´í˜¸", "í•´í‚¹", "í¬ë Œì‹"]
  },
  "ëª¨ì˜í•´í‚¹ ì „ë¬¸ê°€": {
    priority: ["ì‹œìŠ¤í…œí•´í‚¹ê³¼ë³´ì•ˆ", "ë„¤íŠ¸ì›Œí‚¹í•´í‚¹ê³¼ë³´ì•ˆ", "ì •ë³´ë³´í˜¸ê°œë¡ ", "ìš´ì˜ì²´ì œë°ë³´ì•ˆ"],
    keywords: ["í•´í‚¹", "ë³´ì•ˆ", "ì¹¨íˆ¬", "ì·¨ì•½ì "]
  },
  "ì•…ì„±ì½”ë“œ ë¶„ì„ê°€": {
    priority: ["AIê¸°ë°˜ì•…ì„±ì½”ë“œë¶„ì„", "ì–´ì…ˆë¸”ë¦¬ì–´", "ìš´ì˜ì²´ì œ", "ì‹œìŠ¤í…œí•´í‚¹ê³¼ë³´ì•ˆ"],
    keywords: ["ì•…ì„±ì½”ë“œ", "ë¶„ì„", "ì–´ì…ˆë¸”ë¦¬", "ì‹œìŠ¤í…œ", "ë³´ì•ˆ"]
  },
  "ë””ì§€í„¸ í¬ë Œì‹ ì „ë¬¸ê°€": {
    priority: ["ë””ì§€í„¸í¬ë Œì‹", "ì •ë³´ë³´í˜¸ê°œë¡ ", "ìš´ì˜ì²´ì œ", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬"],
    keywords: ["í¬ë Œì‹", "ë¶„ì„", "ì¡°ì‚¬", "ë””ì§€í„¸"]
  },

  // ê²Œì„/ê·¸ë˜í”½ ì§êµ°
  "ê²Œì„ ê°œë°œì": {
    priority: ["ê²Œì„í”„ë¡œê·¸ë˜ë°", "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "ê°€ìƒí˜„ì‹¤", "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°", "ì¸ê³µì§€ëŠ¥"],
    keywords: ["ê²Œì„", "ê·¸ë˜í”½", "3D", "VR", "ê°€ìƒí˜„ì‹¤", "ì—”ì§„"]
  },
  "ê·¸ë˜í”½ìŠ¤ í”„ë¡œê·¸ë˜ë¨¸": {
    priority: ["ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "ì˜ìƒì²˜ë¦¬", "ê°€ìƒí˜„ì‹¤", "ì¦ê°•í˜„ì‹¤"],
    keywords: ["ê·¸ë˜í”½", "3D", "ë Œë”ë§", "ì˜ìƒ", "ì‹œê°í™”"]
  },
  "VR/AR ê°œë°œì": {
    priority: ["ê°€ìƒí˜„ì‹¤", "ì¦ê°•í˜„ì‹¤", "AR/VR/MR", "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "Human-AI Interaction"],
    keywords: ["VR", "AR", "ê°€ìƒí˜„ì‹¤", "ì¦ê°•í˜„ì‹¤", "XR", "ë©”íƒ€ë²„ìŠ¤"]
  },
  
  // ë””ìì¸ ì§êµ° (íƒ€ê³¼ ê³¼ëª© í•„ìš”)
  "ê·¸ë˜í”½ ë””ìì´ë„ˆ": {
    priority: ["ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°", "ë°ì´í„°ì‹œê°í™”", "Human-AI Interaction"],
    keywords: ["ê·¸ë˜í”½", "ë””ìì¸", "ì‹œê°", "UI", "UX", "ë©€í‹°ë¯¸ë””ì–´", "ì˜ìƒ", "ì´ë¯¸ì§€"]
  },
  "UI/UX ë””ìì´ë„ˆ": {
    priority: ["Human-AI Interaction", "ì›¹í”„ë¡œê·¸ë˜ë°", "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°", "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤"],
    keywords: ["UI", "UX", "ì¸í„°í˜ì´ìŠ¤", "ë””ìì¸", "ì‚¬ìš©ì", "ê²½í—˜", "ì¸í„°ë™ì…˜", "ì›¹"]
  },

  // ì‹œìŠ¤í…œ/ì„ë² ë””ë“œ ì§êµ°
  "ì‹œìŠ¤í…œ í”„ë¡œê·¸ë˜ë¨¸": {
    priority: ["ìš´ì˜ì²´ì œ", "ì»´í“¨í„°êµ¬ì¡°", "ì–´ì…ˆë¸”ë¦¬ì–´", "ì‹œìŠ¤í…œí”„ë¡œê·¸ë˜ë°", "ë¦¬ëˆ…ìŠ¤í”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
    keywords: ["ì‹œìŠ¤í…œ", "ìš´ì˜ì²´ì œ", "ì»¤ë„", "ë¦¬ëˆ…ìŠ¤", "ì–´ì…ˆë¸”ë¦¬"]
  },
  "ì„ë² ë””ë“œ ê°œë°œì": {
    priority: ["ì„ë² ë””ë“œì‹œìŠ¤í…œ", "ì»´í“¨í„°êµ¬ì¡°", "ë””ì§€í„¸ì‹œìŠ¤í…œ", "ìš´ì˜ì²´ì œ", "ë©”ì¹´íŠ¸ë¡œë‹‰ìŠ¤"],
    keywords: ["ì„ë² ë””ë“œ", "í•˜ë“œì›¨ì–´", "ë§ˆì´í¬ë¡œ", "íŒì›¨ì–´", "IoT"]
  },
  "ë¡œë´‡ ì—”ì§€ë‹ˆì–´": {
    priority: ["AIë¡œë´‡í”„ë¡œê·¸ë˜ë°", "ë©”ì¹´íŠ¸ë¡œë‹‰ìŠ¤", "ìë™ì œì–´", "ì¸ê³µì§€ëŠ¥", "ê¸°ê³„í•™ìŠµ"],
    keywords: ["ë¡œë´‡", "ì œì–´", "ìë™í™”", "ë©”ì¹´", "ë™ì—­í•™"]
  },

  // ë„¤íŠ¸ì›Œí¬/í†µì‹  ì§êµ°
  "ë„¤íŠ¸ì›Œí¬ ì—”ì§€ë‹ˆì–´": {
    priority: ["ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ë°ì´í„°í†µì‹ ", "í†µì‹ ì‹œìŠ¤í…œ", "ë¬´ì„ í†µì‹ ", "í†µì‹ ì´ë¡ "],
    keywords: ["ë„¤íŠ¸ì›Œí¬", "í†µì‹ ", "í”„ë¡œí† ì½œ", "ë¼ìš°íŒ…", "ë¬´ì„ "]
  },
  "í†µì‹  ì‹œìŠ¤í…œ ì—”ì§€ë‹ˆì–´": {
    priority: ["í†µì‹ ì´ë¡ ", "í†µì‹ ì‹œìŠ¤í…œ", "ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬", "ë¬´ì„ í†µì‹ ê³µí•™", "ê´‘í†µì‹ ê³µí•™"],
    keywords: ["í†µì‹ ", "ì‹ í˜¸", "ë¬´ì„ ", "ê´‘í†µì‹ ", "ì‹œìŠ¤í…œ"]
  },

  // ë°˜ë„ì²´/í•˜ë“œì›¨ì–´ ì§êµ°
  "ë°˜ë„ì²´ ì„¤ê³„ ì—”ì§€ë‹ˆì–´": {
    priority: ["ë””ì§€í„¸ì‹œìŠ¤í…œ", "ì»´í“¨í„°êµ¬ì¡°", "ë°˜ë„ì²´ê³µí•™", "ì „ìíšŒë¡œ1", "ê¸°ì´ˆë°˜ë„ì²´"],
    keywords: ["ë°˜ë„ì²´", "íšŒë¡œ", "ì„¤ê³„", "ë””ì§€í„¸", "VLSI"]
  },
  "í•˜ë“œì›¨ì–´ ì—”ì§€ë‹ˆì–´": {
    priority: ["ë””ì§€í„¸ì‹œìŠ¤í…œ", "ì „ìíšŒë¡œ1", "ì»´í“¨í„°êµ¬ì¡°", "ë””ì§€í„¸ë…¼ë¦¬íšŒë¡œ"],
    keywords: ["í•˜ë“œì›¨ì–´", "íšŒë¡œ", "ë””ì§€í„¸", "ì „ì"]
  },

  // ì—°êµ¬/í•™ìˆ  ì§êµ°
  "AI ì—°êµ¬ì›": {
    priority: ["ë”¥ëŸ¬ë‹", "ì¸ê³µì§€ëŠ¥", "ê¸°ê³„í•™ìŠµ", "ê°•í™”í•™ìŠµ", "ìì—°ì–´ì²˜ë¦¬", "ì˜ìƒì²˜ë¦¬"],
    keywords: ["ì—°êµ¬", "AI", "ë”¥ëŸ¬ë‹", "í•™ìŠµ", "ë…¼ë¬¸"]
  },
  "ì†Œí”„íŠ¸ì›¨ì–´ ì—°êµ¬ì›": {
    priority: ["ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "í”„ë¡œê·¸ë˜ë°ì–¸ì–´ì˜ê°œë…", "ìš´ì˜ì²´ì œ"],
    keywords: ["ì—°êµ¬", "ì•Œê³ ë¦¬ì¦˜", "ì†Œí”„íŠ¸ì›¨ì–´", "ì´ë¡ "]
  },

  // ê¸°íƒ€ IT ì§êµ°
  "IT ì»¨ì„¤í„´íŠ¸": {
    priority: ["ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "ë°ì´í„°ë² ì´ìŠ¤", "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "ì •ë³´ë³´í˜¸ê°œë¡ "],
    keywords: ["ì‹œìŠ¤í…œ", "ì„¤ê³„", "ë¶„ì„", "í”„ë¡œì íŠ¸"]
  },
  "QA ì—”ì§€ë‹ˆì–´": {
    priority: ["ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "ìš´ì˜ì²´ì œ"],
    keywords: ["í…ŒìŠ¤íŠ¸", "í’ˆì§ˆ", "ì†Œí”„íŠ¸ì›¨ì–´", "ê²€ì¦"]
  },
  "ê¸°ìˆ  PM": {
    priority: ["ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "ê³µí•™ì„¤ê³„ê¸°ì´ˆ(ì‚°í•™í”„ë¡œì íŠ¸ì…ë¬¸)"],
    keywords: ["í”„ë¡œì íŠ¸", "ì„¤ê³„", "ê´€ë¦¬", "í˜‘ì—…"]
  },

  // ê¸°ë³¸ê°’ (ë§¤ì¹­ ì•ˆë˜ë©´)
  "default": {
    priority: ["ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "ìš´ì˜ì²´ì œ", "ë°ì´í„°ë² ì´ìŠ¤", "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™"],
    keywords: ["í”„ë¡œê·¸ë˜ë°", "ì•Œê³ ë¦¬ì¦˜", "ì‹œìŠ¤í…œ"]
  }
};

/**
 * ì§„ë¡œì— ë§ëŠ” ê³¼ëª© ë§¤í•‘ ê°€ì ¸ì˜¤ê¸°
 */
export function getCareerCourseMapping(careerTitle: string): { priority: string[]; keywords: string[] } {
  // ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì§„ë¡œ ì°¾ê¸°
  if (CAREER_COURSE_MAPPING[careerTitle]) {
    return CAREER_COURSE_MAPPING[careerTitle];
  }
  
  // ë¶€ë¶„ ì¼ì¹˜ë¡œ ì°¾ê¸°
  const lowerTitle = careerTitle.toLowerCase();
  for (const [career, mapping] of Object.entries(CAREER_COURSE_MAPPING)) {
    if (lowerTitle.includes(career.toLowerCase()) || career.toLowerCase().includes(lowerTitle)) {
      return mapping;
    }
  }
  
  // í‚¤ì›Œë“œë¡œ ë§¤ì¹­
  if (lowerTitle.includes('ë°±ì—”ë“œ') || lowerTitle.includes('ì„œë²„') || lowerTitle.includes('backend')) {
    return CAREER_COURSE_MAPPING["ë°±ì—”ë“œ ê°œë°œì"];
  }
  if (lowerTitle.includes('í”„ë¡ íŠ¸') || lowerTitle.includes('frontend') || lowerTitle.includes('ui')) {
    return CAREER_COURSE_MAPPING["í”„ë¡ íŠ¸ì—”ë“œ ê°œë°œì"];
  }
  if (lowerTitle.includes('ai') || lowerTitle.includes('ì¸ê³µì§€ëŠ¥') || lowerTitle.includes('ë¨¸ì‹ ëŸ¬ë‹')) {
    return CAREER_COURSE_MAPPING["AI ì—”ì§€ë‹ˆì–´"];
  }
  if (lowerTitle.includes('ë°ì´í„°') || lowerTitle.includes('data')) {
    return CAREER_COURSE_MAPPING["ë°ì´í„° ì‚¬ì´ì–¸í‹°ìŠ¤íŠ¸"];
  }
  if (lowerTitle.includes('ë³´ì•ˆ') || lowerTitle.includes('security')) {
    return CAREER_COURSE_MAPPING["ë³´ì•ˆ ì—”ì§€ë‹ˆì–´"];
  }
  if (lowerTitle.includes('ê²Œì„') || lowerTitle.includes('game')) {
    return CAREER_COURSE_MAPPING["ê²Œì„ ê°œë°œì"];
  }
  if (lowerTitle.includes('ì„ë² ë””ë“œ') || lowerTitle.includes('embedded') || lowerTitle.includes('iot')) {
    return CAREER_COURSE_MAPPING["ì„ë² ë””ë“œ ê°œë°œì"];
  }
  if (lowerTitle.includes('ë„¤íŠ¸ì›Œí¬') || lowerTitle.includes('network')) {
    return CAREER_COURSE_MAPPING["ë„¤íŠ¸ì›Œí¬ ì—”ì§€ë‹ˆì–´"];
  }
  if (lowerTitle.includes('ê·¸ë˜í”½') || lowerTitle.includes('ë””ìì¸') || lowerTitle.includes('design')) {
    return CAREER_COURSE_MAPPING["ê·¸ë˜í”½ ë””ìì´ë„ˆ"];
  }
  if (lowerTitle.includes('ux') || lowerTitle.includes('ui')) {
    return CAREER_COURSE_MAPPING["UI/UX ë””ìì´ë„ˆ"];
  }
  
  return CAREER_COURSE_MAPPING["default"];
}

/**
 * ê³¼ëª©ì˜ ì§„ë¡œ ê´€ë ¨ ì ìˆ˜ ê³„ì‚° (0~100)
 */
export function calculateCareerRelevanceScore(
  courseName: string, 
  careerTitle: string
): number {
  const mapping = getCareerCourseMapping(careerTitle);
  
  // ìš°ì„ ìˆœìœ„ ê³¼ëª©ì— ì •í™•íˆ ì¼ì¹˜í•˜ë©´ ë†’ì€ ì ìˆ˜
  const priorityIndex = mapping.priority.findIndex(p => courseName === p);
  if (priorityIndex !== -1) {
    // ìš°ì„ ìˆœìœ„ê°€ ë†’ì„ìˆ˜ë¡ ë†’ì€ ì ìˆ˜ (100, 90, 80, ...)
    return Math.max(100 - priorityIndex * 10, 60);
  }
  
  // í‚¤ì›Œë“œê°€ ê³¼ëª©ëª…ì— í¬í•¨ë˜ë©´ ì¤‘ê°„ ì ìˆ˜
  const lowerCourseName = courseName.toLowerCase();
  for (const keyword of mapping.keywords) {
    if (lowerCourseName.includes(keyword.toLowerCase())) {
      return 50;
    }
  }
  
  // ê´€ë ¨ ì—†ìœ¼ë©´ ê¸°ë³¸ ì ìˆ˜
  return 10;
}

// ===================================
// 1í•™ê¸° ê°œì„¤ ê³¼ëª©
// ===================================
export const SEMESTER_1_COURSES: SemesterCourses = {
  "ì»´í“¨í„°ê³µí•™ê³¼": {
    "1": [
      { "id": "7330", "name": "í™•ë¥ ë°í†µê³„", "type": "ì „í•„", "credits": 3 },
      { "id": "9912", "name": "Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "4118", "name": "ë””ì§€í„¸ì‹œìŠ¤í…œ", "type": "ì „í•„", "credits": 3 },
      { "id": "9913", "name": "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "9952", "name": "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "6237", "name": "ì›¹í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9914", "name": "ê³µí•™ì„¤ê³„ê¸°ì´ˆ(ì‚°í•™í”„ë¡œì íŠ¸ì…ë¬¸)", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9992", "name": "ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ:C++", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11251", "name": "K-MOOC:ëª¨ë‘ë¥¼ìœ„í•œë¨¸ì‹ ëŸ¬ë‹", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "4310", "name": "ìš´ì˜ì²´ì œ", "type": "ì „í•„", "credits": 3 },
      { "id": "3281", "name": "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "7219", "name": "ë°ì´í„°ë² ì´ìŠ¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "7313", "name": "í”„ë¡œê·¸ë˜ë°ì–¸ì–´ì˜ê°œë…", "type": "ì „ì„ ", "credits": 3 },
      { "id": "10881", "name": "ë”¥ëŸ¬ë‹", "type": "ì „ì„ ", "credits": 3 },
      { "id": "5246", "name": "ì‹ í˜¸ë°ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "9960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "6132", "name": "ì˜ìƒì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6135", "name": "ì •ë³´ë³´í˜¸ê°œë¡ ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6478", "name": "ë¬´ì„ í†µì‹ ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11771", "name": "K-MOOC:ìƒì„±í˜•ì¸ê³µì§€ëŠ¥ì…ë¬¸", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11932", "name": "Human-AI Interaction", "type": "ì „ì„ ", "credits": 3 },
      { "id": "12001", "name": "ì§€ëŠ¥í˜•ì—£ì§€ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì†Œí”„íŠ¸ì›¨ì–´í•™ê³¼": {
    "2": [
      { "id": "9952", "name": "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "9992", "name": "ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ:C++", "type": "ì „í•„", "credits": 3 },
      { "id": "5619", "name": "ë©€í‹°ë¯¸ë””ì–´í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "10206", "name": "ì¼ë°˜ë¬¼ë¦¬ë°ì‹œë®¬ë ˆì´ì…˜", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "4310", "name": "ìš´ì˜ì²´ì œ", "type": "ì „í•„", "credits": 3 },
      { "id": "7219", "name": "ë°ì´í„°ë² ì´ìŠ¤", "type": "ì „í•„", "credits": 3 },
      { "id": "9957", "name": "ì˜¤í”ˆì†ŒìŠ¤SWê°œë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "6476", "name": "ê²Œì„í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "9960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "6208", "name": "ê°€ìƒí˜„ì‹¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "10000", "name": "ê¸°ê³„í•™ìŠµ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11904", "name": "ìƒì„±í˜•AI", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì •ë³´ë³´í˜¸í•™ê³¼": {
    "1": [
      { "id": "9912", "name": "Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "9914", "name": "ê³µí•™ì„¤ê³„ê¸°ì´ˆ(ì‚°í•™í”„ë¡œì íŠ¸ì…ë¬¸)", "type": "ì „í•„", "credits": 3 },
      { "id": "9952", "name": "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "3284", "name": "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6237", "name": "ì›¹í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9173", "name": "ì •ë³´ë³´í˜¸ì™€ë³´ì•ˆì˜ê¸°ì´ˆ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9955", "name": "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "9520", "name": "ê³µê°œí‚¤ì•”í˜¸ë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "9986", "name": "ìš´ì˜ì²´ì œë°ë³´ì•ˆ", "type": "ì „í•„", "credits": 3 },
      { "id": "11973", "name": "ì •ë³´ë³´í˜¸ì—°êµ¬ì…ë¬¸", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "9960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "8662", "name": "ë””ì§€í„¸í¬ë Œì‹", "type": "ì „ì„ ", "credits": 3 },
      { "id": "12008", "name": "AIê¸°ë°˜ì•…ì„±ì½”ë“œë¶„ì„", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "AIë¡œë´‡í•™ê³¼": {
    "1": [
      { "id": "7330", "name": "í™•ë¥ ë°í†µê³„", "type": "ì „í•„", "credits": 3 },
      { "id": "9912", "name": "Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "10224", "name": "ì°½ì˜SWê¸°ì´ˆì„¤ê³„", "type": "ì „í•„", "credits": 3 },
      { "id": "11488", "name": "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "4642", "name": "ë™ì—­í•™", "type": "ì „ì„ ", "credits": 3 },
      { "id": "4864", "name": "ë©”ì¹´íŠ¸ë¡œë‹‰ìŠ¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "8621", "name": "MATLABí”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9955", "name": "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11428", "name": "AIë¡œë´‡í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì¸ê³µì§€ëŠ¥í•™ê³¼": {
    "3": [
      { "id": "11261", "name": "ë”¥ëŸ¬ë‹ê°œë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "6132", "name": "ì˜ìƒì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11173", "name": "ìì—°ì–´ì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11262", "name": "ì¸ê³µì§€ëŠ¥ê³¼ì‚¬ì´ë²„ë³´ì•ˆ", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "9960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "10238", "name": "ë”¥ëŸ¬ë‹ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11181", "name": "ê°•í™”í•™ìŠµ", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤í•™ê³¼": {
    "3": [
      { "id": "7219", "name": "ë°ì´í„°ë² ì´ìŠ¤", "type": "ì „í•„", "credits": 3 },
      { "id": "10000", "name": "ê¸°ê³„í•™ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "4310", "name": "ìš´ì˜ì²´ì œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "10563", "name": "ì˜ì‚¬ê²°ì •ë¶„ì„", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "9960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "10566", "name": "ì‹œê³„ì—´ë¶„ì„ë°ì˜ˆì¸¡", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì¸ê³µì§€ëŠ¥ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤í•™ê³¼": {
    "1": [
      { "id": "7330", "name": "í™•ë¥ ë°í†µê³„", "type": "ì „í•„", "credits": 3 },
      { "id": "9912", "name": "Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "9952", "name": "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "11259", "name": "ê¸°ê³„í•™ìŠµê°œë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "4102", "name": "ìˆ˜ì¹˜í•´ì„", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6237", "name": "ì›¹í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9955", "name": "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11321", "name": "ì¸ê³µì§€ëŠ¥í™œìš©", "type": "ì „ì„ ", "credits": 3 },
      { "id": "11322", "name": "ê³ ê¸‰ì¸ê³µì§€ëŠ¥í™œìš©", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì „ìì •ë³´í†µì‹ ê³µí•™ê³¼": {
    "2": [
      { "id": "4114", "name": "ì „ê¸°íšŒë¡œ", "type": "ì „í•„", "credits": 3 },
      { "id": "8622", "name": "í™•ë¥ ë°ëœë¤ë³€ìˆ˜", "type": "ì „í•„", "credits": 3 },
      { "id": "11678", "name": "ê¸°ì´ˆì „ìë¬¼ë¦¬", "type": "ì „í•„", "credits": 3 },
      { "id": "307", "name": "ê³µì—…ìˆ˜í•™2", "type": "ì „ì„ ", "credits": 3 },
      { "id": "4268", "name": "ë°ì´í„°êµ¬ì¡°ë¡ ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "5611", "name": "ë””ì§€í„¸ë…¼ë¦¬íšŒë¡œ", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "4474", "name": "í†µì‹ ì´ë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "4600", "name": "ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬", "type": "ì „í•„", "credits": 3 },
      { "id": "4699", "name": "ë°ì´í„°í†µì‹ ", "type": "ì „í•„", "credits": 3 },
      { "id": "7453", "name": "ì „ìíšŒë¡œ1", "type": "ì „í•„", "credits": 3 },
      { "id": "7806", "name": "ê¸°ì´ˆë°˜ë„ì²´", "type": "ì „í•„", "credits": 3 },
      { "id": "9649", "name": "ì „ìê¸°1", "type": "ì „í•„", "credits": 3 },
      { "id": "4475", "name": "ìë™ì œì–´", "type": "ì „ì„ ", "credits": 3 },
      { "id": "7235", "name": "ëœë¤í”„ë¡œì„¸ìŠ¤", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "2505", "name": "ì¸ê³µì§€ëŠ¥", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6558", "name": "ë¬´ì„ í†µì‹ ê³µí•™", "type": "ì „ì„ ", "credits": 3 },
      { "id": "6562", "name": "ì´ˆê³ ì£¼íŒŒê³µí•™", "type": "ì „ì„ ", "credits": 3 },
      { "id": "9655", "name": "ê´‘í†µì‹ ê³µí•™", "type": "ì „ì„ ", "credits": 3 }
    ]
  }
};

// ===================================
// 2í•™ê¸° ê°œì„¤ ê³¼ëª©
// ===================================
export const SEMESTER_2_COURSES: SemesterCourses = {
  "ì»´í“¨í„°ê³µí•™ê³¼": {
    "1": [
      { "id": "000304", "name": "ê³µì—…ìˆ˜í•™1", "type": "ì „í•„", "credits": 3 },
      { "id": "001725", "name": "ì„ í˜•ëŒ€ìˆ˜", "type": "ì „í•„", "credits": 3 },
      { "id": "009913", "name": "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "009912", "name": "Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "009954", "name": "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "003278", "name": "ì»´í“¨í„°êµ¬ì¡°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009955", "name": "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009956", "name": "ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ:JAVA", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011251", "name": "K-MOOC:ëª¨ë‘ë¥¼ìœ„í•œë¨¸ì‹ ëŸ¬ë‹", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "003284", "name": "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "type": "ì „í•„", "credits": 3 },
      { "id": "001769", "name": "ì†Œí”„íŠ¸ì›¨ì–´ê³µí•™", "type": "ì „ì„ ", "credits": 3 },
      { "id": "002505", "name": "ì¸ê³µì§€ëŠ¥", "type": "ì „ì„ ", "credits": 3 },
      { "id": "004599", "name": "í†µì‹ ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "004600", "name": "ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "008636", "name": "ë©€í‹°ì½”ì–´í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "012000", "name": "ë¦¬ëˆ…ìŠ¤í”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "009960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "006208", "name": "ê°€ìƒí˜„ì‹¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011771", "name": "K-MOOC:ìƒì„±í˜•ì¸ê³µì§€ëŠ¥ì…ë¬¸", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì†Œí”„íŠ¸ì›¨ì–´í•™ê³¼": {
    "2": [
      { "id": "003278", "name": "ì»´í“¨í„°êµ¬ì¡°", "type": "ì „í•„", "credits": 3 },
      { "id": "009954", "name": "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "009993", "name": "SWì„¤ê³„ê¸°ì´ˆ(ì‚°í•™í”„ë¡œì íŠ¸ì…ë¬¸)", "type": "ì „í•„", "credits": 3 },
      { "id": "009955", "name": "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009956", "name": "ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ:JAVA", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "003281", "name": "ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤", "type": "ì „ì„ ", "credits": 3 },
      { "id": "005910", "name": "ë°ì´í„°ë² ì´ìŠ¤í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011175", "name": "ìŒì„±ì˜¤ë””ì˜¤ì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "009960", "name": "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)", "type": "ì „í•„", "credits": 6 },
      { "id": "002505", "name": "ì¸ê³µì§€ëŠ¥", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010001", "name": "ì¦ê°•í˜„ì‹¤", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì •ë³´ë³´í˜¸í•™ê³¼": {
    "1": [
      { "id": "000304", "name": "ê³µì—…ìˆ˜í•™1", "type": "ì „í•„", "credits": 3 },
      { "id": "001725", "name": "ì„ í˜•ëŒ€ìˆ˜", "type": "ì „í•„", "credits": 3 },
      { "id": "009913", "name": "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "009174", "name": "ì–´ì…ˆë¸”ë¦¬ì–´", "type": "ì „í•„", "credits": 3 },
      { "id": "009954", "name": "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "002998", "name": "ì •ìˆ˜ë¡ ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "003278", "name": "ì»´í“¨í„°êµ¬ì¡°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009176", "name": "ê³ ê¸‰ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009518", "name": "ëŒ€ì¹­í‚¤ì•”í˜¸ë¡ ", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "009989", "name": "ì‹œìŠ¤í…œí•´í‚¹ê³¼ë³´ì•ˆ", "type": "ì „í•„", "credits": 3 },
      { "id": "011972", "name": "ì •ë³´ë³´í˜¸ì‹¬í™”ì—°êµ¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "012007", "name": "AIê¸°ë°˜ì‹œìŠ¤í…œí”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "008663", "name": "ë³´ì•ˆì •ì±…ê³¼ë²•ê·œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010447", "name": "ì •ë³´ë³´í˜¸íŠ¹ê°•", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "AIë¡œë´‡í•™ê³¼": {
    "1": [
      { "id": "000304", "name": "ê³µì—…ìˆ˜í•™1", "type": "ì „í•„", "credits": 3 },
      { "id": "001725", "name": "ì„ í˜•ëŒ€ìˆ˜", "type": "ì „í•„", "credits": 3 },
      { "id": "009913", "name": "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "004118", "name": "ë””ì§€í„¸ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "005246", "name": "ì‹ í˜¸ë°ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "006237", "name": "ì›¹í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010226", "name": "ë™ì ì‹œìŠ¤í…œëª¨ë¸ë§", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011495", "name": "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011646", "name": "ë©”ì»¤ë‹ˆì¦˜ì„¤ê³„", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì¸ê³µì§€ëŠ¥í•™ê³¼": {
    "3": [
      { "id": "011263", "name": "íŒŒì´ì¬ê¸°ë°˜ë”¥ëŸ¬ë‹", "type": "ì „í•„", "credits": 3 },
      { "id": "006566", "name": "ì§€ëŠ¥í˜•ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009665", "name": "íŒ¨í„´ì¸ì‹", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011264", "name": "ì¸ê³µì§€ëŠ¥ë³´ì•ˆ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011265", "name": "AR/VR/MR", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "009967", "name": "íŠ¹í—ˆì™€ì°½ì—…", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011271", "name": "Humanâ€“AI Interaction", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤í•™ê³¼": {
    "3": [
      { "id": "009957", "name": "ì˜¤í”ˆì†ŒìŠ¤SWê°œë¡ ", "type": "ì „í•„", "credits": 3 },
      { "id": "002505", "name": "ì¸ê³µì§€ëŠ¥", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010143", "name": "ë°ì´í„°ì‹œê°í™”", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010145", "name": "ë°ì´í„°ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ1", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011176", "name": "ëŒ€ìš©ëŸ‰ë°ì´í„°ì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "009967", "name": "íŠ¹í—ˆì™€ì°½ì—…", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010146", "name": "ë°ì´í„°ë¬¸ì œí•´ê²°ë°ì‹¤ìŠµ2", "type": "ì „ì„ ", "credits": 3 },
      { "id": "010570", "name": "ê³ ê¸‰ê¸°ê³„í•™ìŠµ", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì¸ê³µì§€ëŠ¥ë°ì´í„°ì‚¬ì´ì–¸ìŠ¤í•™ê³¼": {
    "1": [
      { "id": "000304", "name": "ê³µì—…ìˆ˜í•™1", "type": "ì „í•„", "credits": 3 },
      { "id": "001725", "name": "ì„ í˜•ëŒ€ìˆ˜", "type": "ì „í•„", "credits": 3 },
      { "id": "009913", "name": "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 }
    ],
    "2": [
      { "id": "003278", "name": "ì»´í“¨í„°êµ¬ì¡°", "type": "ì „í•„", "credits": 3 },
      { "id": "009954", "name": "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ", "type": "ì „í•„", "credits": 3 },
      { "id": "004600", "name": "ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011497", "name": "ê¸°ê³„í•™ìŠµì‹¤ìŠµ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011499", "name": "ì¸ê³µì§€ëŠ¥ìˆ˜í•™", "type": "ì „ì„ ", "credits": 3 }
    ]
  },
  "ì „ìì •ë³´í†µì‹ ê³µí•™ê³¼": {
    "2": [
      { "id": "004111", "name": "ë¬¼ë¦¬ì „ìê³µí•™", "type": "ì „í•„", "credits": 3 },
      { "id": "005246", "name": "ì‹ í˜¸ë°ì‹œìŠ¤í…œ", "type": "ì „í•„", "credits": 3 },
      { "id": "007620", "name": "ê¸°ì´ˆì„¤ê³„", "type": "ì „í•„", "credits": 3 },
      { "id": "003276", "name": "ì»´í“¨í„°êµ¬ì¡°ë¡ ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "009658", "name": "ì „ê¸°íšŒë¡œì‹¤í—˜", "type": "ì „ì„ ", "credits": 3 },
      { "id": "011680", "name": "ê°ì²´ì§€í–¥í”„ë¡œê·¸ë˜ë°", "type": "ì „ì„ ", "credits": 3 }
    ],
    "3": [
      { "id": "003284", "name": "ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬", "type": "ì „í•„", "credits": 3 },
      { "id": "004829", "name": "ê´‘ì „ìê³µí•™", "type": "ì „í•„", "credits": 3 },
      { "id": "006132", "name": "ì˜ìƒì²˜ë¦¬", "type": "ì „í•„", "credits": 3 },
      { "id": "006294", "name": "ìŒì„±ì²˜ë¦¬", "type": "ì „í•„", "credits": 3 },
      { "id": "008086", "name": "ë””ì§€í„¸í†µì‹ ì‹œìŠ¤í…œ", "type": "ì „í•„", "credits": 3 },
      { "id": "004596", "name": "ë°˜ë„ì²´ê³µí•™", "type": "ì „ì„ ", "credits": 3 },
      { "id": "006139", "name": "ì„ë² ë””ë“œì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "007722", "name": "ì „ìíšŒë¡œ2", "type": "ì „ì„ ", "credits": 3 }
    ],
    "4": [
      { "id": "004102", "name": "ìˆ˜ì¹˜í•´ì„", "type": "ì „ì„ ", "credits": 3 },
      { "id": "004830", "name": "ë””ì§€í„¸ì œì–´", "type": "ì „ì„ ", "credits": 3 },
      { "id": "007284", "name": "ê´‘í†µì‹ ì‹œìŠ¤í…œ", "type": "ì „ì„ ", "credits": 3 },
      { "id": "007463", "name": "ì°¨ì„¸ëŒ€ì´ë™í†µì‹ ", "type": "ì „ì„ ", "credits": 3 }
    ]
  }
};

// ===================================
// ì„ ì´ìˆ˜ ê´€ê³„ ë°ì´í„°
// ===================================
export const PREREQUISITES: Record<string, string[]> = {
  "ë¬¼ë¦¬ì „ìê³µí•™": ["ë¯¸ì ë¶„í•™", "ê¸°ì´ˆë¬¼ë¦¬ì „ìê³µí•™"],
  "ë””ì§€í„¸ì‹ í˜¸ì²˜ë¦¬": ["ì‹ í˜¸ë°ì‹œìŠ¤í…œ"],
  "í†µì‹ ì´ë¡ ": ["ì‹ í˜¸ë°ì‹œìŠ¤í…œ"],
  "ì „ìíšŒë¡œ2": ["ì „ìíšŒë¡œ1"],
  "ì „ìê¸°2": ["ì „ìê¸°1"],
  "ì¸ê³µì§€ëŠ¥ê³¼ë¹…ë°ì´í„°": ["ê³ ê¸‰í”„ë¡œê·¸ë˜ë°í™œìš©"],
  "ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ": ["Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
  "ì „ê¸°íšŒë¡œ2": ["ì „ê¸°íšŒë¡œ1"],
  "ì „ìíšŒë¡œ1": ["ì „ê¸°íšŒë¡œ2"],
  "ì „ìíšŒë¡œì‹¤í—˜": ["ì „ìíšŒë¡œ2"],
  "ë°˜ë„ì²´CADì‹¤í—˜": ["ì „ìíšŒë¡œì‹¤í—˜"],
  "ì»´í“¨í„°êµ¬ì¡°": ["ë””ì§€í„¸ë…¼ë¦¬íšŒë¡œ"],
  "í•˜ë“œì›¨ì–´êµ¬í˜„ì–¸ì–´": ["ì»´í“¨í„°êµ¬ì¡°"],
  "AIë°˜ë„ì²´ì§‘ì íšŒë¡œ": ["í•˜ë“œì›¨ì–´êµ¬í˜„ì–¸ì–´"],
  "AIë°˜ë„ì²´ì„¤ê³„": ["AIë°˜ë„ì²´ì§‘ì íšŒë¡œ"],
  "ë°˜ë„ì²´ì†Œìê³µí•™1": ["ë¬¼ë¦¬ì „ìê³µí•™"],
  "ë°˜ë„ì²´ì†Œìê³µí•™2": ["ë°˜ë„ì²´ì†Œìê³µí•™1"],
  "ë°˜ë„ì²´ê³µì •": ["ë°˜ë„ì²´ê³µì •ì—­í•™"],
  "ë°˜ë„ì²´ì†Œìì œì‘ë°ì‹¤ìŠµ1": ["ë°˜ë„ì²´ê³µì •"],
  "ë°˜ë„ì²´ì†Œìì œì‘ë°ì‹¤ìŠµ2": ["ë°˜ë„ì²´ì†Œìì œì‘ë°ì‹¤ìŠµ1"],
  "ë°˜ë„ì²´ì¬ë£Œê³µí•™": ["ë°•ë§‰ê³µí•™"],
  "ë””ìŠ¤í”Œë ˆì´ê³µí•™": ["ë°˜ë„ì²´ì¬ë£Œê³µí•™"],
  "ë°˜ë„ì²´ì¬ë£Œë¶„ì„": ["ë””ìŠ¤í”Œë ˆì´ê³µí•™"],
  "ë‚˜ë…¸ì†Œì¬ì˜í•©ì„±ë°ì‘ìš©": ["ë°˜ë„ì²´ì¬ë£Œë¶„ì„"],
  "ë°˜ë„ì²´íŠ¹í™”ì—°êµ¬ë°ì‹¤í—˜1": ["ì—°êµ¬ì‹¤ì¸í„´"],
  "ë°˜ë„ì²´ì¢…í•©ì„¤ê³„A": ["ë°˜ë„ì²´íŠ¹í™”ì—°êµ¬ë°ì‹¤í—˜2"],
  "ë°˜ë„ì²´ì¢…í•©ì„¤ê³„B": ["ë°˜ë„ì²´íŠ¹í™”ì—°êµ¬ë°ì‹¤í—˜2"],
  "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ": ["Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
  "ì•Œê³ ë¦¬ì¦˜ë°ì‹¤ìŠµ": ["Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ", "ìë£Œêµ¬ì¡°ë°ì‹¤ìŠµ"],
  "Capstoneë””ìì¸(ì‚°í•™í˜‘ë ¥í”„ë¡œì íŠ¸)": ["ì„ í˜•ëŒ€ìˆ˜", "ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°"],
  "ê°ì²´ì§€í–¥í”„ë¡œê·¸ë˜ë°C++": ["ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
  "ë””ì§€í„¸ì´ë¯¸ì§€í”„ë¡œê·¸ë˜ë°": ["Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
  "ì»´í“¨í„°ì• ë‹ˆë©”ì´ì…˜": ["ì‹¤ì‹œê°„ì»´í“¨í„°ê·¸ë˜í”½ìŠ¤"],
  "ê³µê°œí‚¤ì•”í˜¸ë¡ ": ["ë¯¸ì ë¶„í•™1"],
  "ëŒ€ì¹­í‚¤ì•”í˜¸ë¡ ": ["ì´ì‚°ìˆ˜í•™ë°í”„ë¡œê·¸ë˜ë°"],
  "ë„¤íŠ¸ì›Œí‚¹í•´í‚¹ê³¼ë³´ì•ˆ": ["ì»´í“¨í„°ë„¤íŠ¸ì›Œí¬"],
  "ì‹œìŠ¤í…œí•´í‚¹ê³¼ë³´ì•ˆ": ["ìš´ì˜ì²´ì œë°ë³´ì•ˆ"],
  "ë””ì§€í„¸í¬ë Œì‹": ["ì–´ì…ˆë¸”ë¦¬ì–´"],
  "AIê¸°ë°˜ì•…ì„±ì½”ë“œë¶„ì„": ["ì–´ì…ˆë¸”ë¦¬ì–´"],
  "ë°ì´í„°ë¶„ì„ê°œë¡ ": ["ê³ ê¸‰Cí”„ë¡œê·¸ë˜ë°ë°ì‹¤ìŠµ"],
  "ê¸°ê³„í•™ìŠµê°œë¡ ": ["í†µê³„í•™ê°œë¡ "],
  "ì¸ê³µì§€ëŠ¥": ["í™•ë¥ ë°í†µê³„"],
  "ê¸°ê³„í•™ìŠµ": ["ì°½ì˜SWê¸°ì´ˆì„¤ê³„", "ì„ í˜•ëŒ€ìˆ˜"],
};

export function getPrerequisites(courseName: string): string[] {
  return PREREQUISITES[courseName] || [];
}

export function canTakeCourse(courseName: string, completedCourseNames: string[]): boolean {
  const prereqs = getPrerequisites(courseName);
  if (prereqs.length === 0) return true;
  return prereqs.every(prereq => completedCourseNames.includes(prereq));
}

// ===================================
// ì „ì²´ í•™ê³¼ì—ì„œ ì „ì„  ê³¼ëª© ìˆ˜ì§‘ (í•µì‹¬ ì¶”ê°€ í•¨ìˆ˜)
// ===================================

/**
 * ëª¨ë“  í•™ê³¼ì˜ ì „ì„  ê³¼ëª©ì„ ìˆ˜ì§‘í•˜ê³  í•™ê³¼ ì •ë³´ë¥¼ ì¶”ê°€
 */
export function getAllElectiveCourses(
  semesterData: SemesterCourses,
  excludeCompleted: string[]
): (CourseData & { department: string })[] {
  const allElectives: (CourseData & { department: string })[] = [];
  const seenCourses = new Set<string>(); // ì¤‘ë³µ ì œê±°ìš©
  
  for (const [dept, gradeData] of Object.entries(semesterData)) {
    for (const [grade, courses] of Object.entries(gradeData)) {
      for (const course of courses) {
        // ì „ì„ ë§Œ, ì´ë¯¸ ì´ìˆ˜í•œ ê³¼ëª© ì œì™¸, ì¤‘ë³µ ì œê±°
        if (
          course.type === 'ì „ì„ ' &&
          !excludeCompleted.includes(course.name) &&
          !seenCourses.has(course.name)
        ) {
          seenCourses.add(course.name);
          allElectives.push({
            ...course,
            department: dept
          });
        }
      }
    }
  }
  
  return allElectives;
}

/**
 * ì§„ë¡œ ê´€ë ¨ë„ ê¸°ì¤€ìœ¼ë¡œ ì „ì„  ê³¼ëª© ì •ë ¬
 */
export function sortElectivesByCareerRelevance(
  electives: (CourseData & { department: string })[],
  careerTitle: string
): (CourseData & { department: string; relevanceScore: number })[] {
  return electives
    .map(course => ({
      ...course,
      relevanceScore: calculateCareerRelevanceScore(course.name, careerTitle)
    }))
    .sort((a, b) => b.relevanceScore - a.relevanceScore);
}

// ===================================
// ì¶”ì²œ ê³¼ëª© íƒ€ì…
// ===================================

export type RecommendedCourse = {
  id: string;
  name: string;
  type: 'ì „í•„' | 'ì „ì„ ';
  credits: number;
  semester: string;
  reason: string;
  department?: string;        // íƒ€ê³¼ ê³¼ëª©ì´ë©´ í•™ê³¼ëª… í‘œì‹œ
  relevanceScore?: number;    // ì§„ë¡œ ê´€ë ¨ë„ ì ìˆ˜
};

export type SemesterRecommendation = {
  semester: string;
  grade: number;
  semesterNum: number;
  courses: RecommendedCourse[];
};

// ===================================
// ë©”ì¸ ì¶”ì²œ í•¨ìˆ˜ (ìˆ˜ì •ë¨)
// ===================================

/**
 * í˜„ì¬ í•™ë…„/í•™ê¸°ë¶€í„° ì¡¸ì—…ê¹Œì§€ ë‚¨ì€ ëª¨ë“  í•™ê¸° ì¶”ì²œ ê³¼ëª© ìƒì„±
 * 
 * âœ¨ ë³€ê²½ì‚¬í•­:
 * - ì „í•„: ë³¸ì¸ í•™ê³¼ì—ì„œë§Œ ì„ íƒ (ì¡¸ì—…ìš”ê±´)
 * - ì „ì„ : ì „ì²´ í•™ê³¼ì—ì„œ ì§„ë¡œ ê´€ë ¨ë„ ê¸°ì¤€ìœ¼ë¡œ ì„ íƒ
 */
export function getAllRemainingRecommendations(
  department: string,
  currentGrade: number,
  currentSemesterNum: number,
  currentYear: number,
  completedCourseNames: string[],
  completedCourseSemesters?: string[],
  careerTitle?: string
): SemesterRecommendation[] {
  const result: SemesterRecommendation[] = [];
  
  // ëˆ„ì  ì´ìˆ˜ ê³¼ëª© (ì¶”ì²œ ê³¼ëª©ë„ ì´ìˆ˜í•œ ê²ƒìœ¼ë¡œ ì²˜ë¦¬)
  let accumulatedCompleted = [...completedCourseNames];
  
  // ì§„ë¡œ ë§¤í•‘
  const careerMapping = careerTitle ? getCareerCourseMapping(careerTitle) : null;
  
  console.log('ğŸ¯ ì§„ë¡œ ê¸°ë°˜ ì¶”ì²œ:', careerTitle || 'ë¯¸ì„ íƒ');
  console.log('ğŸ“š ì „ì„  ê³¼ëª©: ì „ì²´ í•™ê³¼ì—ì„œ ê²€ìƒ‰');
  
  // ì´ìˆ˜ í•™ê¸° ê³„ì‚°
  let completedSemesters: number;
  let lastCompletedYear = currentYear;
  let lastCompletedSemNum = currentSemesterNum;
  
  if (completedCourseSemesters && completedCourseSemesters.length > 0) {
    const uniqueSemesters = [...new Set(
      completedCourseSemesters.filter(s => s && s.includes('-') && !s.includes('ì—¬ë¦„') && !s.includes('ê²¨ìš¸'))
    )];
    completedSemesters = uniqueSemesters.length;
    
    const sortedSemesters = uniqueSemesters
      .map(s => {
        const [year, sem] = s.split('-').map(Number);
        return { year, sem, str: s };
      })
      .sort((a, b) => {
        if (a.year !== b.year) return b.year - a.year;
        return b.sem - a.sem;
      });
    
    if (sortedSemesters.length > 0) {
      lastCompletedYear = sortedSemesters[0].year;
      lastCompletedSemNum = sortedSemesters[0].sem;
    }
  } else {
    completedSemesters = Math.ceil(completedCourseNames.length / 7) || 1;
  }
  
  const calculatedGrade = Math.min(4, Math.ceil(completedSemesters / 2));
  
  // ë‹¤ìŒ í•™ê¸° ê³„ì‚°
  let year = lastCompletedYear;
  let semNum: number;
  let grade: number;
  
  if (lastCompletedSemNum === 1) {
    semNum = 2;
    grade = calculatedGrade;
  } else {
    semNum = 1;
    year += 1;
    grade = Math.min(4, calculatedGrade + 1);
  }
  
  const remainingSemesters = Math.max(0, 8 - completedSemesters);
  
  console.log('ğŸ“… ì¶”ì²œ ì‹œì‘:', { year, grade, semNum, remainingSemesters });
  
  // í•™ê¸°ë³„ ë°˜ë³µ
  let loopCount = 0;
  while (grade <= 4 && loopCount < remainingSemesters + 1) {
    loopCount++;
    
    const semesterData = semNum === 1 ? SEMESTER_1_COURSES : SEMESTER_2_COURSES;
    
    // ===================================
    // 1. ì „í•„: ë³¸ì¸ í•™ê³¼ì—ì„œë§Œ ì„ íƒ
    // ===================================
    const myDeptData = semesterData[department] || semesterData['ì»´í“¨í„°ê³µí•™ê³¼'];
    const gradeKey = String(grade);
    let myDeptCourses: CourseData[] = myDeptData[gradeKey] || [];
    
    // ì¸ì ‘ í•™ë…„ ì „í•„ë„ í¬í•¨
    if (myDeptCourses.filter(c => c.type === 'ì „í•„').length < 2) {
      const adjacentGrades = [String(grade - 1), String(grade + 1)];
      for (const g of adjacentGrades) {
        if (myDeptData[g]) {
          myDeptCourses = [...myDeptCourses, ...myDeptData[g]];
        }
      }
    }
    
    const requiredCourses = myDeptCourses
      .filter(c => c.type === 'ì „í•„' && !accumulatedCompleted.includes(c.name));
    
    // ===================================
    // 2. ì „ì„ : ì „ì²´ í•™ê³¼ì—ì„œ ì§„ë¡œ ê´€ë ¨ë„ ê¸°ì¤€ ì„ íƒ
    // ===================================
    const allElectives = getAllElectiveCourses(semesterData, accumulatedCompleted);
    
    let sortedElectives: (CourseData & { department: string; relevanceScore?: number })[];
    if (careerTitle) {
      sortedElectives = sortElectivesByCareerRelevance(allElectives, careerTitle);
      console.log(`   ğŸ” ${careerTitle} ê´€ë ¨ Top 5:`, 
        sortedElectives.slice(0, 5).map(c => `${c.name}(${c.department}, ${c.relevanceScore}ì )`)
      );
    } else {
      sortedElectives = allElectives.map(c => ({ ...c, relevanceScore: 0 }));
    }
    
    // ===================================
    // 3. ê³¼ëª© ì„ íƒ: ì „í•„ 2ê°œ + ì „ì„  2ê°œ
    // ===================================
    const maxCourses = 4;
    const selectedRequired = requiredCourses.slice(0, Math.min(2, requiredCourses.length));
    const selectedElective = sortedElectives.slice(0, Math.min(maxCourses - selectedRequired.length, 3));
    
    // ì¶”ì²œ ì´ìœ  ìƒì„±
    const getReasonByCareer = (
      courseName: string, 
      courseType: string,
      courseDept?: string,
      score?: number
    ): string => {
      if (courseType === 'ì „í•„') {
        return grade === 4 ? 'ì¡¸ì—…ìš”ê±´ í•„ìˆ˜' : 'ì „ê³µ ê¸°ì´ˆ ê°•í™”';
      }
      
      // íƒ€ê³¼ ê³¼ëª©ì´ë©´ í•™ê³¼ í‘œì‹œ
      const deptLabel = courseDept && courseDept !== department ? ` (${courseDept})` : '';
      
      if (careerTitle && score) {
        if (score >= 80) {
          return `${careerTitle} í•µì‹¬ ì—­ëŸ‰${deptLabel}`;
        }
        if (score >= 50) {
          return `${careerTitle} ê´€ë ¨${deptLabel}`;
        }
      }
      
      return `ì§„ë¡œ í™•ì¥ ì¶”ì²œ${deptLabel}`;
    };
    
    const semesterStr = `${year}-${semNum}`;
    
    const recommendedCourses: RecommendedCourse[] = [
      // ì „í•„
      ...selectedRequired.map(course => ({
        ...course,
        semester: semesterStr,
        reason: getReasonByCareer(course.name, course.type),
      })),
      // ì „ì„  (ì „ì²´ í•™ê³¼ì—ì„œ ì„ íƒë¨)
      ...selectedElective.map(course => ({
        id: course.id,
        name: course.name,
        type: course.type,
        credits: course.credits,
        semester: semesterStr,
        reason: getReasonByCareer(course.name, course.type, course.department, course.relevanceScore),
        department: course.department !== department ? course.department : undefined,
        relevanceScore: course.relevanceScore,
      }))
    ];
    
    console.log(`ğŸ“š ${semesterStr}: ${recommendedCourses.length}ê°œ ì¶”ì²œ`);
    recommendedCourses.forEach(c => {
      const deptTag = c.department ? ` [${c.department}]` : '';
      console.log(`   - ${c.name}${deptTag}: ${c.reason}`);
    });
    
    if (recommendedCourses.length > 0) {
      result.push({
        semester: semesterStr,
        grade,
        semesterNum: semNum,
        courses: recommendedCourses,
      });
      
      accumulatedCompleted = [
        ...accumulatedCompleted,
        ...recommendedCourses.map(c => c.name)
      ];
    }
    
    // ë‹¤ìŒ í•™ê¸°ë¡œ
    if (semNum === 1) {
      semNum = 2;
    } else {
      semNum = 1;
      year += 1;
      grade += 1;
    }
  }
  
  console.log('âœ… ì´ ì¶”ì²œ í•™ê¸° ìˆ˜:', result.length);
  
  return result;
}

// ===================================
// ë‹¨ì¼ í•™ê¸° ì¶”ì²œ (ê¸°ì¡´ í˜¸í™˜)
// ===================================

function pickRandom<T>(arr: T[], n: number): T[] {
  const shuffled = [...arr].sort(() => Math.random() - 0.5);
  return shuffled.slice(0, n);
}

export function getRecommendedCourses(
  department: string,
  grade: number,
  semesterNum: number,
  completedCourseNames: string[]
): RecommendedCourse[] {
  const semesterData = semesterNum === 1 ? SEMESTER_1_COURSES : SEMESTER_2_COURSES;
  
  const deptData = semesterData[department];
  if (!deptData) {
    return getRecommendedCourses('ì»´í“¨í„°ê³µí•™ê³¼', grade, semesterNum, completedCourseNames);
  }
  
  const gradeKey = String(grade);
  let courses = deptData[gradeKey] || [];
  
  if (courses.length < 4) {
    const allGrades = Object.keys(deptData).sort();
    for (const g of allGrades) {
      if (g !== gradeKey) {
        courses = [...courses, ...deptData[g]];
      }
    }
  }
  
  const availableCourses = courses.filter(
    c => !completedCourseNames.includes(c.name)
  );
  
  const required = availableCourses.filter(c => c.type === 'ì „í•„');
  const elective = availableCourses.filter(c => c.type === 'ì „ì„ ');
  
  const selectedRequired = pickRandom(required, Math.min(2, required.length));
  const selectedElective = pickRandom(elective, Math.min(2, elective.length));
  
  const total = [...selectedRequired, ...selectedElective];
  if (total.length < 4) {
    const remaining = availableCourses.filter(c => !total.includes(c));
    const additional = pickRandom(remaining, 4 - total.length);
    total.push(...additional);
  }
  
  const reasons = [
    'ë‹¤ìŒ í•™ê¸° ìˆ˜ê°• ì¶”ì²œ',
    'ì „ê³µ ì—­ëŸ‰ ê°•í™”ì— í•„ìˆ˜',
    'ì·¨ì—… ê²½ìŸë ¥ í–¥ìƒ',
    'ì¡¸ì—…ìš”ê±´ ì¶©ì¡± í•„ìš”',
  ];
  
  const semesterStr = `${new Date().getFullYear()}-${semesterNum}`;
  
  return total.slice(0, 4).map((course, idx) => ({
    ...course,
    semester: semesterStr,
    reason: reasons[idx % reasons.length],
  }));
}